<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="XUnity_AutoInstaller.Pages.ConfigPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:XUnity.AutoInstaller.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 配置内容区 -->
        <ScrollViewer Grid.Row="0" x:Name="ConfigScrollViewer">
            <StackPanel Spacing="24" Margin="24">
                <!-- 页面标题 -->
                <TextBlock
                    Text="配置编辑"
                    Style="{StaticResource TitleTextBlockStyle}"/>

                <!-- 错误提示 -->
                <InfoBar
                    x:Name="ErrorInfoBar"
                    Severity="Error"
                    IsOpen="False"
                    IsClosable="True"
                    Title="错误"/>

                <!-- 加载指示器 -->
                <StackPanel
                    x:Name="LoadingPanel"
                    Visibility="Collapsed"
                    HorizontalAlignment="Center"
                    Spacing="16"
                    Margin="40">
                    <ProgressRing IsActive="True" Width="60" Height="60"/>
                    <TextBlock
                        Text="正在加载配置文件..."
                        Style="{StaticResource SubtitleTextBlockStyle}"
                        HorizontalAlignment="Center"/>
                </StackPanel>

                <!-- 锁定状态面板 -->
                <StackPanel
                    x:Name="LockedPanel"
                    Visibility="Collapsed"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Spacing="24"
                    Margin="40">
                    <FontIcon
                        Glyph="&#xE72C;"
                        FontSize="64"
                        Opacity="0.5"
                        Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                    <StackPanel Spacing="12" HorizontalAlignment="Center">
                        <TextBlock
                            Text="配置编辑已锁定"
                            Style="{StaticResource TitleTextBlockStyle}"
                            HorizontalAlignment="Center"/>
                        <TextBlock
                            Text="请先在首页选择有效的游戏路径并确保 BepInEx 已安装"
                            FontSize="14"
                            Opacity="0.7"
                            HorizontalAlignment="Center"
                            TextWrapping="Wrap"
                            MaxWidth="400"/>
                    </StackPanel>
                </StackPanel>

                <!-- 配置内容面板 -->
                <StackPanel x:Name="ConfigContentPanel" Spacing="16">
                    <!-- 游戏路径提示 -->
                    <InfoBar
                        x:Name="GamePathInfoBar"
                        Severity="Informational"
                        IsOpen="True"
                        IsClosable="False"
                        Title="提示"
                        Message="如果未检测到游戏路径或BepInEx未安装，请点击下方按钮选择游戏目录">
                        <InfoBar.ActionButton>
                            <Button
                                Content="选择游戏目录"
                                Click="BrowseGamePathButton_Click"/>
                        </InfoBar.ActionButton>
                    </InfoBar>

                    <!-- ========================================= -->
                    <!-- 📋 基础设置 -->
                    <!-- ========================================= -->
                    <Expander
                        Header="📋 基础设置"
                        IsExpanded="True"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch">
                        <StackPanel Spacing="24" HorizontalAlignment="Stretch">

                                <!-- 翻译核心配置 -->
                                <TextBlock Text="翻译核心配置" FontWeight="SemiBold" FontSize="16" Margin="0,0,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="翻译服务 (Endpoint)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="EndpointComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="1">
                                                <ComboBoxItem Content="Passthrough（直通-无翻译）" Tag="Passthrough"/>
                                                <ComboBoxItem Content="GoogleTranslate（谷歌翻译-免费）" Tag="GoogleTranslate"/>
                                                <ComboBoxItem Content="GoogleTranslateV2（谷歌V2-免费）" Tag="GoogleTranslateV2"/>
                                                <ComboBoxItem Content="GoogleTranslateCompat（谷歌兼容-免费）" Tag="GoogleTranslateCompat"/>
                                                <ComboBoxItem Content="GoogleTranslateLegitimate（谷歌云-需API密钥）" Tag="GoogleTranslateLegitimate"/>
                                                <ComboBoxItem Content="BingTranslate（必应翻译-免费）" Tag="BingTranslate"/>
                                                <ComboBoxItem Content="BingTranslateLegitimate（Azure翻译-需API密钥）" Tag="BingTranslateLegitimate"/>
                                                <ComboBoxItem Content="DeepLTranslate（DeepL-免费）" Tag="DeepLTranslate"/>
                                                <ComboBoxItem Content="DeepLTranslateLegitimate（DeepL Pro-需API密钥）" Tag="DeepLTranslateLegitimate"/>
                                                <ComboBoxItem Content="PapagoTranslate（Papago-免费）" Tag="PapagoTranslate"/>
                                                <ComboBoxItem Content="BaiduTranslate（百度翻译-需AppId）" Tag="BaiduTranslate"/>
                                                <ComboBoxItem Content="YandexTranslate（Yandex-需API密钥）" Tag="YandexTranslate"/>
                                                <ComboBoxItem Content="WatsonTranslate（IBM Watson-需认证）" Tag="WatsonTranslate"/>
                                                <ComboBoxItem Content="LecPowerTranslator15（本地软件）" Tag="LecPowerTranslator15"/>
                                                <ComboBoxItem Content="ezTransXP（本地软件-日韩）" Tag="ezTransXP"/>
                                                <ComboBoxItem Content="LingoCloudTranslate（彩云小译-中日英）" Tag="LingoCloudTranslate"/>
                                                <ComboBoxItem Content="CustomTranslate（自定义HTTP端点）" Tag="CustomTranslate"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="备用翻译服务 (Fallback Endpoint)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="当主要服务失败时使用的备用服务"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ComboBox
                                                x:Name="FallbackEndpointComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="0">
                                                <ComboBoxItem Content="无"/>
                                                <ComboBoxItem Content="BingTranslate"/>
                                                <ComboBoxItem Content="GoogleTranslate"/>
                                                <ComboBoxItem Content="DeepL"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="目标语言 (Language)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="LanguageComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="0">
                                                <ComboBoxItem Content="zh-CN（简体中文）"/>
                                                <ComboBoxItem Content="zh-TW（繁体中文）"/>
                                                <ComboBoxItem Content="en（英语）"/>
                                                <ComboBoxItem Content="ja（日语）"/>
                                                <ComboBoxItem Content="ko（韩语）"/>
                                                <ComboBoxItem Content="fr（法语）"/>
                                                <ComboBoxItem Content="de（德语）"/>
                                                <ComboBoxItem Content="es（西班牙语）"/>
                                                <ComboBoxItem Content="ru（俄语）"/>
                                                <ComboBoxItem Content="pt（葡萄牙语）"/>
                                                <ComboBoxItem Content="it（意大利语）"/>
                                                <ComboBoxItem Content="ar（阿拉伯语）"/>
                                                <ComboBoxItem Content="th（泰语）"/>
                                                <ComboBoxItem Content="vi（越南语）"/>
                                                <ComboBoxItem Content="id（印尼语）"/>
                                                <ComboBoxItem Content="tr（土耳其语）"/>
                                                <ComboBoxItem Content="pl（波兰语）"/>
                                                <ComboBoxItem Content="nl（荷兰语）"/>
                                                <ComboBoxItem Content="sv（瑞典语）"/>
                                                <ComboBoxItem Content="da（丹麦语）"/>
                                                <ComboBoxItem Content="fi（芬兰语）"/>
                                                <ComboBoxItem Content="no（挪威语）"/>
                                                <ComboBoxItem Content="cs（捷克语）"/>
                                                <ComboBoxItem Content="hu（匈牙利语）"/>
                                                <ComboBoxItem Content="ro（罗马尼亚语）"/>
                                                <ComboBoxItem Content="uk（乌克兰语）"/>
                                                <ComboBoxItem Content="el（希腊语）"/>
                                                <ComboBoxItem Content="he（希伯来语）"/>
                                                <ComboBoxItem Content="hi（印地语）"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="源语言 (From Language)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="FromLanguageComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="0">
                                                <ComboBoxItem Content="ja（日语）"/>
                                                <ComboBoxItem Content="en（英语）"/>
                                                <ComboBoxItem Content="ko（韩语）"/>
                                                <ComboBoxItem Content="zh-CN（简体中文）"/>
                                                <ComboBoxItem Content="zh-TW（繁体中文）"/>
                                                <ComboBoxItem Content="fr（法语）"/>
                                                <ComboBoxItem Content="de（德语）"/>
                                                <ComboBoxItem Content="es（西班牙语）"/>
                                                <ComboBoxItem Content="ru（俄语）"/>
                                                <ComboBoxItem Content="pt（葡萄牙语）"/>
                                                <ComboBoxItem Content="it（意大利语）"/>
                                                <ComboBoxItem Content="ar（阿拉伯语）"/>
                                                <ComboBoxItem Content="th（泰语）"/>
                                                <ComboBoxItem Content="vi（越南语）"/>
                                                <ComboBoxItem Content="id（印尼语）"/>
                                                <ComboBoxItem Content="tr（土耳其语）"/>
                                                <ComboBoxItem Content="pl（波兰语）"/>
                                                <ComboBoxItem Content="nl（荷兰语）"/>
                                                <ComboBoxItem Content="sv（瑞典语）"/>
                                                <ComboBoxItem Content="da（丹麦语）"/>
                                                <ComboBoxItem Content="fi（芬兰语）"/>
                                                <ComboBoxItem Content="no（挪威语）"/>
                                                <ComboBoxItem Content="cs（捷克语）"/>
                                                <ComboBoxItem Content="hu（匈牙利语）"/>
                                                <ComboBoxItem Content="ro（罗马尼亚语）"/>
                                                <ComboBoxItem Content="uk（乌克兰语）"/>
                                                <ComboBoxItem Content="el（希腊语）"/>
                                                <ComboBoxItem Content="he（希伯来语）"/>
                                                <ComboBoxItem Content="hi（印地语）"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 字体与文本显示 -->
                                <TextBlock Text="字体与文本显示" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <TextBlock
                                            Text="字体设置"
                                            FontWeight="SemiBold"
                                            FontSize="14"
                                            Margin="0,0,0,8"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="通用字体覆盖 (Override Font)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="OverrideFontTextBox"
                                                PlaceholderText="例如: Microsoft YaHei"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="TextMeshPro 字体覆盖 (Override Font TextMeshPro)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="OverrideFontTextMeshProTextBox"
                                                PlaceholderText="例如: Arial SDF"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="TextMeshPro 备用字体 (Fallback Font TextMeshPro)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="FallbackFontTextMeshProTextBox"
                                                PlaceholderText="例如: LiberationSans SDF"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <TextBlock
                                            Text="UI 调整设置"
                                            FontWeight="SemiBold"
                                            FontSize="14"
                                            Margin="0,8,0,8"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用 UI 自动调整 (Enable UI Resizing)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="自动调整 UI 组件大小以适应翻译后的文本"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="EnableUIResizingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="强制 UI 调整 (Force UI Resizing)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ForceUIResizingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="行间距缩放比例 (Resize UI Line Spacing Scale)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="留空使用默认值"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <TextBox
                                                x:Name="ResizeUILineSpacingScaleTextBox"
                                                PlaceholderText="例如: 1.1"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <TextBlock
                                            Text="文本处理设置"
                                            FontWeight="SemiBold"
                                            FontSize="14"
                                            Margin="0,8,0,8"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="处理富文本 (Handle Rich Text)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="HandleRichTextToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="文本解析器最大递归深度 (Max Text Parser Recursion)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="MaxTextParserRecursionNumber"
                                                Value="10"
                                                Minimum="1"
                                                Maximum="100"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="HTML 实体预处理 (Html Entity Preprocessing)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="HtmlEntityPreprocessingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 框架集成 -->
                                <TextBlock Text="框架集成开关" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <TextBlock
                                            Text="选择要Hook的Unity文本框架"
                                            FontSize="12"
                                            Opacity="0.7"
                                            TextWrapping="Wrap"/>

                                        <ToggleSwitch
                                            x:Name="EnableUGUIToggle"
                                            Header="UGUI"
                                            OnContent="已启用"
                                            OffContent="已禁用"
                                            IsOn="True"/>

                                        <ToggleSwitch
                                            x:Name="EnableNGUIToggle"
                                            Header="NGUI"
                                            OnContent="已启用"
                                            OffContent="已禁用"
                                            IsOn="True"/>

                                        <ToggleSwitch
                                            x:Name="EnableTextMeshProToggle"
                                            Header="TextMeshPro"
                                            OnContent="已启用"
                                            OffContent="已禁用"
                                            IsOn="True"/>

                                        <ToggleSwitch
                                            x:Name="EnableTextMeshToggle"
                                            Header="TextMesh"
                                            OnContent="已启用"
                                            OffContent="已禁用"
                                            IsOn="False"/>

                                        <ToggleSwitch
                                            x:Name="EnableIMGUIToggle"
                                            Header="IMGUI"
                                            OnContent="已启用"
                                            OffContent="已禁用"
                                            IsOn="False"/>

                                        <ToggleSwitch
                                            x:Name="EnableFairyGUIToggle"
                                            Header="FairyGUI"
                                            OnContent="已启用"
                                            OffContent="已禁用"
                                            IsOn="False"/>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 基础翻译行为 -->
                                <TextBlock Text="基础翻译行为" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="最大翻译字符数 (Max Characters Per Translation)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="单次翻译的最大字符数（20-2500）"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <NumberBox
                                                x:Name="MaxCharactersPerTranslationNumber"
                                                Minimum="20"
                                                Maximum="2500"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="最小对话字符 (Min Dialogue Chars)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="MinDialogueCharsNumber"
                                                Value="20"
                                                Minimum="1"
                                                Maximum="100"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="忽略对话空白 (Ignore Whitespace In Dialogue)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="IgnoreWhitespaceInDialogueToggle"
                                                OnContent="忽略"
                                                OffContent="保留"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="复制到剪贴板 (Copy To Clipboard)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CopyToClipboardToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>
                                    </StackPanel>

                        </StackPanel>
                    </Expander>

                    <!-- ========================================= -->
                    <!-- ⚙️ 进阶设置 -->
                    <!-- ========================================= -->
                    <Expander
                        Header="⚙️ 进阶设置"
                        IsExpanded="False"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch">
                        <StackPanel Spacing="24" HorizontalAlignment="Stretch">

                                <!-- 翻译行为控制 -->
                                <TextBlock Text="翻译行为控制" FontWeight="SemiBold" FontSize="16" Margin="0,0,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用批量翻译 (Enable Batching)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="批量处理翻译请求以减少API调用"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="EnableBatchingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="使用静态翻译 (Use Static Translations)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="使用缓存的翻译文件"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="UseStaticTranslationsToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="忽略文本开头字符 (Ignore Text Starting With)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="IgnoreTextStartingWithTextBox"
                                                PlaceholderText="例如: [、【"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="输出无法翻译的文本 (Output Untranslatable Text)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="OutputUntranslatableTextToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="翻译延迟（毫秒）(Delay)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="TranslationDelayNumber"
                                                Value="0"
                                                Minimum="0"
                                                Maximum="5000"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用翻译作用域 (Enable Translation Scoping)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="支持TARC指令解析"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="EnableTranslationScopingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 文件与资源管理 -->
                                <TextBlock Text="文件与资源管理" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <TextBlock
                                            Text="翻译文件配置"
                                            FontWeight="SemiBold"
                                            FontSize="14"
                                            Margin="0,0,0,8"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="缓存目录 (Directory)" FontWeight="SemiBold"/>
                                            <Grid ColumnSpacing="8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox
                                                    x:Name="DirectoryTextBox"
                                                    Grid.Column="0"
                                                    PlaceholderText="Translation"
                                                    HorizontalAlignment="Stretch"/>
                                                <Button
                                                    Grid.Column="1"
                                                    Content="浏览"
                                                    Click="BrowseDirectoryButton_Click"/>
                                            </Grid>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="输出文件 (Output File)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="OutputFileTextBox"
                                                PlaceholderText="_AutoGeneratedTranslations.txt"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="替换文件 (Substitution File)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="SubstitutionFileTextBox"
                                                PlaceholderText="_Substitutions.txt"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="预处理器文件 (Preprocessors File)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="PreprocessorsFileTextBox"
                                                PlaceholderText="_Preprocessors.txt"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="后处理器文件 (Postprocessors File)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="PostprocessorsFileTextBox"
                                                PlaceholderText="_Postprocessors.txt"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <TextBlock
                                            Text="纹理配置"
                                            FontWeight="SemiBold"
                                            FontSize="14"
                                            Margin="0,16,0,8"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="纹理目录 (Texture Directory)" FontWeight="SemiBold"/>
                                            <Grid ColumnSpacing="8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox
                                                    x:Name="TextureDirectoryTextBox"
                                                    Grid.Column="0"
                                                    PlaceholderText="AutoTranslator/Texture"
                                                    HorizontalAlignment="Stretch"/>
                                                <Button
                                                    Grid.Column="1"
                                                    Content="浏览"
                                                    Click="BrowseTextureDirectoryButton_Click"/>
                                            </Grid>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用纹理翻译 (Enable Texture Translation)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableTextureTranslationToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用纹理转储 (Enable Texture Dumping)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="将游戏纹理导出以便进行翻译编辑"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="EnableTextureDumpingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="纹理哈希生成策略 (Texture Hash Generation Strategy)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="TextureHashGenerationStrategyComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="0">
                                                <ComboBoxItem Content="FromImageName"/>
                                                <ComboBoxItem Content="FromImageData"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 性能与缓存 -->
                                <TextBlock Text="性能与缓存" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用程序集缓存 (BepInEx Assembly Cache)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="启用此选项可加速插件发现"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="EnableAssemblyCacheToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用翻译缓存 (XUnity Translation Cache)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableCacheToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="最大缓存条目数 (Max Cache Entries)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="MaxCacheEntriesNumber"
                                                Value="5000"
                                                Minimum="100"
                                                Maximum="50000"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="在内存中缓存纹理 (Cache Textures In Memory)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="提高性能但会占用更多内存"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="CacheTexturesInMemoryToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="缓存正则表达式查询 (Cache Regex Lookups)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CacheRegexLookupsToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="缓存空格差异 (Cache Whitespace Differences)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CacheWhitespaceDifferencesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="缓存正则表达式模式结果 (Cache Regex Pattern Results)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CacheRegexPatternResultsToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- BepInEx日志设置 -->
                                <TextBlock Text="BepInEx 日志设置" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="Unity日志监听 (Unity Log Listening)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="UnityLogListeningToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="日志输出到Unity (Log Console To Unity Log)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="LogConsoleToUnityLogToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <TextBlock Text="控制台配置" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用控制台 (Console)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ConsoleToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="防止关闭控制台 (Prevent Close)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ConsolePreventCloseToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="控制台 Shift-JIS 编码" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="启用后使用Shift-JIS编码（否则使用UTF-8）"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="ConsoleShiftJISToggle"
                                                OnContent="Shift-JIS"
                                                OffContent="UTF-8"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="标准输出类型 (Standard Out Type)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="ConsoleStandardOutTypeComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="0">
                                                <ComboBoxItem Content="Auto（自动）"/>
                                                <ComboBoxItem Content="ConsoleOut"/>
                                                <ComboBoxItem Content="StandardOut"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="控制台日志级别 (Console Log Levels)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="ConsoleLogLevelsComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="5">
                                                <ComboBoxItem Content="None - 无日志"/>
                                                <ComboBoxItem Content="Fatal - 仅致命错误"/>
                                                <ComboBoxItem Content="Error - 错误及以上"/>
                                                <ComboBoxItem Content="Warning - 警告及以上"/>
                                                <ComboBoxItem Content="Message - 消息及以上"/>
                                                <ComboBoxItem Content="Info - 信息及以上（推荐）"/>
                                                <ComboBoxItem Content="Debug - 调试及以上"/>
                                                <ComboBoxItem Content="All - 全部日志"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <TextBlock Text="磁盘日志配置" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="写入Unity日志 (Write Unity Log)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DiskWriteUnityLogToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="追加日志 (Append Log)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="启动时追加而非覆盖日志文件"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="DiskAppendLogToggle"
                                                OnContent="追加"
                                                OffContent="覆盖"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用磁盘日志 (Disk Enabled)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DiskEnabledToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="磁盘日志级别 (Disk Log Levels)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="DiskLogLevelsComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="5">
                                                <ComboBoxItem Content="None - 无日志"/>
                                                <ComboBoxItem Content="Fatal - 仅致命错误"/>
                                                <ComboBoxItem Content="Error - 错误及以上"/>
                                                <ComboBoxItem Content="Warning - 警告及以上"/>
                                                <ComboBoxItem Content="Message - 消息及以上"/>
                                                <ComboBoxItem Content="Info - 信息及以上（推荐）"/>
                                                <ComboBoxItem Content="Debug - 调试及以上"/>
                                                <ComboBoxItem Content="All - 全部日志"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- XUnity调试设置 -->
                                <TextBlock Text="XUnity 调试设置" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用调试控制台 (Enable Console)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DebugEnableConsoleToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用调试日志 (Enable Log)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DebugEnableLogToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 认证配置 -->
                                <TextBlock Text="认证配置（可选）" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <TextBlock
                                            Text="需要认证的翻译服务配置（仅在使用相应服务时填写）"
                                            FontSize="12"
                                            Opacity="0.7"
                                            TextWrapping="Wrap"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Google API Key" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="GoogleAPIKeyTextBox"
                                                PlaceholderText="输入Google Cloud Translation API密钥"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Bing Subscription Key" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="BingSubscriptionKeyTextBox"
                                                PlaceholderText="输入Azure Translator订阅密钥"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL API Key" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="DeepLAPIKeyTextBox"
                                                PlaceholderText="输入DeepL API密钥"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Baidu AppId" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="BaiduAppIdTextBox"
                                                PlaceholderText="输入百度翻译AppId"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Baidu AppSecret" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="BaiduAppSecretTextBox"
                                                PlaceholderText="输入百度翻译AppSecret"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Baidu 延迟秒数 (Delay Seconds)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="BaiduDelaySecondsNumber"
                                                Value="1"
                                                Minimum="0"
                                                Maximum="10"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Yandex API Key" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="YandexAPIKeyTextBox"
                                                PlaceholderText="输入Yandex翻译API密钥"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Watson API Key" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="WatsonAPIKeyTextBox"
                                                PlaceholderText="输入IBM Watson Translation API密钥"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Watson Key" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="WatsonKeyTextBox"
                                                PlaceholderText="输入IBM Watson Key"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="LingoCloud Token (彩云小译)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="LingoCloudTokenTextBox"
                                                PlaceholderText="输入彩云小译API Token"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="LingoCloud Token (LingoCloudToken)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="LingoCloudLingoCloudTokenTextBox"
                                                PlaceholderText="输入LingoCloud Token"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Watson URL" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="WatsonUrlTextBox"
                                                PlaceholderText="输入IBM Watson Translation服务URL"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL 免费计划 (DeepL Free)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="使用DeepL免费API而非专业版"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="DeepLFreeToggle"
                                                OnContent="免费版"
                                                OffContent="专业版"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL API 可执行文件位置 (Executable Location)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="DeepLLegitimateExecutableLocationTextBox"
                                                PlaceholderText="留空使用默认值"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>
                                    </StackPanel>

                        </StackPanel>
                    </Expander>

                    <!-- ========================================= -->
                    <!-- 🔧 专家设置 -->
                    <!-- ========================================= -->
                    <Expander
                        Header="🔧 专家设置"
                        IsExpanded="False"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch">
                        <StackPanel Spacing="24" HorizontalAlignment="Stretch">

                                <TextBlock
                                    Text="⚠️ 警告：这些是高级开发者选项，修改不当可能导致游戏无法启动或崩溃"
                                    Foreground="{ThemeResource SystemFillColorCautionBrush}"
                                    FontSize="13"
                                    TextWrapping="Wrap"/>

                                <!-- BepInEx预加载器 -->
                                <TextBlock Text="BepInEx 预加载器配置" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="隐藏管理器GameObject (Hide Manager GameObject)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="可修复某些游戏的加载问题"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="HideManagerGameObjectToggle"
                                                OnContent="已隐藏"
                                                OffContent="显示"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用运行时补丁 (Apply Runtime Patches)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="除非遇到Harmony问题，否则应始终为true"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="ApplyRuntimePatchesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Harmony后端类型 (Harmony Backend)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="用于开发调试，一般保持Auto即可"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ComboBox
                                                x:Name="HarmonyBackendComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="0">
                                                <ComboBoxItem Content="Auto（自动）"/>
                                                <ComboBoxItem Content="DynamicMethod"/>
                                                <ComboBoxItem Content="MethodBuilder"/>
                                                <ComboBoxItem Content="Cecil"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="转储程序集 (Dump Assemblies)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="保存修补后的程序集到 BepInEx/DumpedAssemblies 用于调试"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="DumpAssembliesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="加载转储的程序集 (Load Dumped Assemblies)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="从DumpedAssemblies加载程序集，用于调试"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="LoadDumpedAssembliesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="加载前断点 (Break Before Load Assemblies)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="在加载前调用Debugger.Break()，用于dnSpy等调试器"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="BreakBeforeLoadAssembliesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="预加载器日志到Unity (Preloader Log Console To Unity Log)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="PreloaderLogConsoleToUnityLogToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <TextBlock Text="入口点配置" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="入口点程序集 (Entrypoint Assembly)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="EntrypointAssemblyTextBox"
                                                PlaceholderText="UnityEngine.dll"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="入口点类型 (Entrypoint Type)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="EntrypointTypeTextBox"
                                                PlaceholderText="Application"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="入口点方法 (Entrypoint Method)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="EntrypointMethodTextBox"
                                                PlaceholderText=".cctor"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 日志详细控制 -->
                                <TextBlock Text="日志详细控制" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="Chainloader 日志显示级别 (Chainloader Log Levels)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="ChainloaderLogLevelsComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="5">
                                                <ComboBoxItem Content="None - 无日志"/>
                                                <ComboBoxItem Content="Fatal - 仅致命错误"/>
                                                <ComboBoxItem Content="Error - 错误及以上"/>
                                                <ComboBoxItem Content="Warning - 警告及以上"/>
                                                <ComboBoxItem Content="Message - 消息及以上"/>
                                                <ComboBoxItem Content="Info - 信息及以上（推荐）"/>
                                                <ComboBoxItem Content="Debug - 调试及以上"/>
                                                <ComboBoxItem Content="All - 全部日志"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="显示 Unity 日志消息 (Chainloader)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ChainloaderLogUnityMessagesToggle"
                                                OnContent="显示"
                                                OffContent="隐藏"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Harmony 日志通道 (Log Channels)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="警告: IL通道会输出完整补丁方法，仅在需要时使用"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ComboBox
                                                x:Name="HarmonyLogChannelsComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="2">
                                                <ComboBoxItem Content="None"/>
                                                <ComboBoxItem Content="Info"/>
                                                <ComboBoxItem Content="Warn, Error（推荐）"/>
                                                <ComboBoxItem Content="Debug, Warning, Error"/>
                                                <ComboBoxItem Content="All"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 高级翻译行为 -->
                                <TextBlock Text="高级翻译行为" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="剪贴板最大字符数 (Max Clipboard Copy Characters)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="MaxClipboardCopyCharactersNumber"
                                                Value="450"
                                                Minimum="1"
                                                Maximum="10000"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="剪贴板防抖延迟（秒）(Clipboard Debounce Time)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="ClipboardDebounceTimeNumber"
                                                Value="1.25"
                                                Minimum="0"
                                                Maximum="10"
                                                SpinButtonPlacementMode="Inline"
                                                SmallChange="0.1"
                                                LargeChange="0.5"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="指定字符后强制换行 (Force Split Text After Characters)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="0 表示禁用"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <NumberBox
                                                x:Name="ForceSplitTextAfterCharactersNumber"
                                                Value="0"
                                                Minimum="0"
                                                Maximum="1000"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="NGUI 中忽略空格 (Ignore Whitespace In NGUI)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="IgnoreWhitespaceInNGUIToggle"
                                                OnContent="忽略"
                                                OffContent="保留"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <TextBlock Text="后处理规则" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="罗马字后处理 (Romaji Post Processing)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="RomajiPostProcessingTextBox"
                                                PlaceholderText="默认: ReplaceMacronWithCircumflex;RemoveApostrophes;ReplaceHtmlEntities"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="翻译后处理 (Translation Post Processing)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="TranslationPostProcessingTextBox"
                                                PlaceholderText="默认: ReplaceMacronWithCircumflex;ReplaceHtmlEntities"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="正则表达式后处理 (Regex Post Processing)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="RegexPostProcessingTextBox"
                                                PlaceholderText="默认: None"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="游戏日志组件路径 (Game Log Text Paths)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="GameLogTextPathsTextBox"
                                                PlaceholderText="分号分隔的组件路径"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <TextBlock Text="生成选项" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="生成静态替换翻译 (Generate Static Substitution Translations)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="GenerateStaticSubstitutionTranslationsToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="生成部分翻译 (Generate Partial Translations)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="GeneratePartialTranslationsToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <TextBlock Text="其他高级选项" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="富文本持久化模式 (Persist Rich Text Mode)" FontWeight="SemiBold"/>
                                            <ComboBox
                                                x:Name="PersistRichTextModeComboBox"
                                                HorizontalAlignment="Stretch"
                                                SelectedIndex="2">
                                                <ComboBoxItem Content="None"/>
                                                <ComboBoxItem Content="Restored"/>
                                                <ComboBoxItem Content="Final（推荐）"/>
                                            </ComboBox>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="静默模式 (Enable Silent Mode)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="减少日志输出"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="EnableSilentModeToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="IMGUI 黑名单插件 (Blacklisted IMGUI Plugins)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="BlacklistedIMGUIPluginsTextBox"
                                                PlaceholderText="分号分隔的插件名称"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="忽略虚拟文本设置器调用规则 (Ignore Virtual Text Setter Calling Rules)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="IgnoreVirtualTextSetterCallingRulesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="输出过长文本 (Output Too Long Text)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="OutputTooLongTextToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="字体大小覆盖 (Override Font Size)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="留空使用默认值"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <TextBox
                                                x:Name="OverrideFontSizeTextBox"
                                                PlaceholderText="例如: 16"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="文本获取器兼容模式 (Behaviour TextGetter Compatibility Mode)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="BehaviourTextGetterCompatibilityModeToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用文本路径日志 (Enable Text Path Logging)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableTextPathLoggingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="将所有数字模板化 (Template All Number Away)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="TemplateAllNumberAwayToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="文件变更时重新加载翻译 (Reload Translations On File Change)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ReloadTranslationsOnFileChangeToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="禁用 TextMeshPro 滚动效果 (Disable TextMeshPro Scroll In Effects)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DisableTextMeshProScrollInEffectsToggle"
                                                OnContent="已禁用"
                                                OffContent="已启用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="缓存解析后的翻译 (Cache Parsed Translations)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CacheParsedTranslationsToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 开发者工具 -->
                                <TextBlock Text="开发者工具" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用翻译助手日志 (Enable Translation Helper)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableTranslationHelperToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="强制使用 MonoMod 钩子 (Force MonoMod Hooks)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ForceMonoModHooksToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="初始化 Harmony 迂回网桥 (Initialize Harmony Detour Bridge)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="InitializeHarmonyDetourBridgeToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="文本获取器兼容模式 (TextGetter Compatibility Mode)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="用于某些使用文本内容做逻辑判断的游戏"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="TextGetterCompatibilityModeToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 资源重定向器 -->
                                <TextBlock Text="资源重定向器" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用资源重定向 (Enable Redirector)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableRedirectorToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="检测重复资源 (Detect Duplicate Resources)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DetectDuplicateResourcesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="重定向资源存储路径 (Preferred Storage Path)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="PreferredStoragePathTextBox"
                                                PlaceholderText="Translation\{Lang}\RedirectedResources"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用 TextAsset 重定向 (Enable TextAsset Redirector)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableTextAssetRedirectorToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="记录所有加载的资源 (Log All Loaded Resources)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="用于调试，会产生大量日志"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <ToggleSwitch
                                                x:Name="LogAllLoadedResourcesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用资源导出 (Enable Dumping)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="ResourceRedirectorEnableDumpingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="缓存所有文件的元数据 (Cache Metadata For All Files)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CacheMetadataForAllFilesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="重定向资源检测策略 (Redirected Resource Detection Strategy)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="RedirectedResourceDetectionStrategyTextBox"
                                                PlaceholderText="默认: AppendMongolianVowelSeparatorAndRemoveAll"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 纹理高级选项 -->
                                <TextBlock Text="纹理高级选项" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用纹理切换 (Enable Texture Toggling)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="允许运行时切换原始纹理和翻译纹理"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="EnableTextureTogglingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="场景加载时扫描纹理 (Enable Texture Scan On Scene Load)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableTextureScanOnSceneLoadToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用 SpriteRenderer 钩子 (Enable SpriteRenderer Hooking)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableSpriteRendererHookingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用 Sprite 钩子 (Enable Sprite Hooking)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableSpriteHookingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="加载未修改的纹理 (Load Unmodified Textures)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="LoadUnmodifiedTexturesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="检测重复纹理名称 (Detect Duplicate Texture Names)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="DetectDuplicateTextureNamesToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="重复纹理名称列表 (Duplicate Texture Names)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="分号分隔的纹理名称"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <TextBox
                                                x:Name="DuplicateTextureNamesTextBox"
                                                PlaceholderText="texture1;texture2"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用旧版纹理加载 (Enable Legacy Texture Loading)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="EnableLegacyTextureLoadingToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- HTTP与网络 -->
                                <TextBlock Text="HTTP 与网络" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="User-Agent" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="HttpUserAgentTextBox"
                                                PlaceholderText="留空使用默认值"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="禁用证书验证 (Disable Certificate Checks)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="⚠️ 警告: 可能导致安全风险"
                                                Foreground="{ThemeResource SystemFillColorCautionBrush}"
                                                FontSize="12"/>
                                            <ToggleSwitch
                                                x:Name="DisableCertificateChecksToggle"
                                                OnContent="已禁用"
                                                OffContent="已启用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="禁用证书验证 (Disable Certificate Validation)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="⚠️ 警告: 可能导致安全风险"
                                                Foreground="{ThemeResource SystemFillColorCautionBrush}"
                                                FontSize="12"/>
                                            <ToggleSwitch
                                                x:Name="DisableCertificateValidationToggle"
                                                OnContent="已禁用"
                                                OffContent="已启用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <TextBlock Text="自定义翻译服务 URL" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="自定义翻译服务 URL (Custom URL)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="使用CustomTranslate端点时需要配置"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <TextBox
                                                x:Name="CustomUrlTextBox"
                                                PlaceholderText="输入自定义翻译API地址"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用短延迟 (Enable Short Delay)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CustomEnableShortDelayToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="禁用垃圾信息检查 (Disable Spam Checks)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="CustomDisableSpamChecksToggle"
                                                OnContent="已禁用"
                                                OffContent="已启用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Google 自定义服务 URL" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="自定义Google翻译API端点（留空使用默认）"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <TextBox
                                                x:Name="GoogleServiceUrlTextBox"
                                                PlaceholderText="例如: https://translate.googleapis.com"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <TextBlock Text="Google V2 配置" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Google V2 服务 URL (Service URL)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="GoogleV2ServiceUrlTextBox"
                                                PlaceholderText="留空使用默认值"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Google V2 RPC ID" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="GoogleV2RPCIDTextBox"
                                                PlaceholderText="MkEWBc"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Google V2 版本 (VERSION)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="GoogleV2VersionTextBox"
                                                PlaceholderText="boq_translate-webserver_20210323.10_p0"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Google V2 使用最简单模式 (Use Simplest)" FontWeight="SemiBold"/>
                                            <ToggleSwitch
                                                x:Name="GoogleV2UseSimplestToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="False"/>
                                        </StackPanel>

                                        <TextBlock Text="DeepL 速率限制配置" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL 最小延迟（秒）(Min Delay)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="DeepLMinDelayNumber"
                                                Value="2"
                                                Minimum="0"
                                                Maximum="60"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL 最大延迟（秒）(Max Delay)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="DeepLMaxDelayNumber"
                                                Value="7"
                                                Minimum="0"
                                                Maximum="60"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL 可执行文件位置 (Executable Location)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="DeepLExecutableLocationTextBox"
                                                PlaceholderText="留空使用默认值"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL 最小延迟秒数 (Min Delay Seconds)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="DeepLMinDelaySecondsNumber"
                                                Value="2"
                                                Minimum="0"
                                                Maximum="60"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="DeepL 最大延迟秒数 (Max Delay Seconds)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="DeepLMaxDelaySecondsNumber"
                                                Value="6"
                                                Minimum="0"
                                                Maximum="60"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <TextBlock Text="本地翻译软件配置" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="LecPowerTranslator15 安装路径" FontWeight="SemiBold"/>
                                            <Grid ColumnSpacing="8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox
                                                    x:Name="LecPowerTranslator15InstallationPathTextBox"
                                                    Grid.Column="0"
                                                    PlaceholderText="C:\Program Files\LecPowerTranslator15"
                                                    HorizontalAlignment="Stretch"/>
                                                <Button
                                                    Grid.Column="1"
                                                    Content="浏览"
                                                    Click="BrowseLecPathButton_Click"/>
                                            </Grid>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="ezTrans 安装路径" FontWeight="SemiBold"/>
                                            <Grid ColumnSpacing="8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox
                                                    x:Name="EzTransInstallationPathTextBox"
                                                    Grid.Column="0"
                                                    PlaceholderText="C:\Program Files\ezTrans"
                                                    HorizontalAlignment="Stretch"/>
                                                <Button
                                                    Grid.Column="1"
                                                    Content="浏览"
                                                    Click="BrowseEzTransPathButton_Click"/>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- Translation Aggregator -->
                                <TextBlock Text="Translation Aggregator 翻译聚合器" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="窗口宽度 (Width)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="TranslationAggregatorWidthNumber"
                                                Value="400"
                                                Minimum="200"
                                                Maximum="2000"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="窗口高度 (Height)" FontWeight="SemiBold"/>
                                            <NumberBox
                                                x:Name="TranslationAggregatorHeightNumber"
                                                Value="100"
                                                Minimum="50"
                                                Maximum="1000"
                                                SpinButtonPlacementMode="Inline"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="启用的翻译器 (Enabled Translators)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="分号分隔的翻译器ID列表"
                                                FontSize="12"
                                                Opacity="0.7"/>
                                            <TextBox
                                                x:Name="EnabledTranslatorsTextBox"
                                                PlaceholderText="translator1;translator2"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>
                                    </StackPanel>

                                <MenuFlyoutSeparator/>

                                <!-- 迁移设置 -->
                                <TextBlock Text="迁移设置" FontWeight="SemiBold" FontSize="16" Margin="0,16,0,8"/>

                                <StackPanel Spacing="16" HorizontalAlignment="Stretch">
                                    <StackPanel Spacing="8">
                                            <TextBlock Text="启用自动迁移 (Enable)" FontWeight="SemiBold"/>
                                            <TextBlock
                                                Text="自动迁移配置文件到新版本格式"
                                                FontSize="12"
                                                Opacity="0.7"
                                                TextWrapping="Wrap"/>
                                            <ToggleSwitch
                                                x:Name="MigrationsEnableToggle"
                                                OnContent="已启用"
                                                OffContent="已禁用"
                                                IsOn="True"/>
                                        </StackPanel>

                                        <StackPanel Spacing="8">
                                            <TextBlock Text="迁移版本标签 (Tag)" FontWeight="SemiBold"/>
                                            <TextBox
                                                x:Name="MigrationsTagTextBox"
                                                PlaceholderText="4.15.0"
                                                HorizontalAlignment="Stretch"/>
                                        </StackPanel>
                                    </StackPanel>

                        </StackPanel>
                    </Expander>

                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- 底部操作栏 -->
        <Border
            Grid.Row="1"
            Background="{ThemeResource LayerFillColorDefaultBrush}"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            BorderThickness="0,1,0,0"
            Padding="24,16">
            <Grid ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button
                    x:Name="OpenConfigFolderButton"
                    Grid.Column="0"
                    HorizontalAlignment="Left"
                    Click="OpenConfigFolderButton_Click">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE8B7;" FontSize="16"/>
                        <TextBlock Text="打开配置文件夹"/>
                    </StackPanel>
                </Button>

                <Button
                    x:Name="ResetButton"
                    Grid.Column="1"
                    Content="重置为默认"
                    Click="ResetButton_Click"/>

                <Button
                    x:Name="CancelButton"
                    Grid.Column="2"
                    Content="取消"
                    Click="CancelButton_Click"/>

                <Button
                    x:Name="SaveButton"
                    Grid.Column="3"
                    Style="{StaticResource AccentButtonStyle}"
                    Click="SaveButton_Click">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE74E;" FontSize="16"/>
                            <TextBlock Text="保存配置"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Page>
